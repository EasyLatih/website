<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Our Courses | EasyLatih</title>
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet" />
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <!-- header and filters omitted for brevity -->
  <section class="container">
    <div id="coursesContainer" class="course-grid"></div>
    <div id="inquiryCart" class="inquiry-cart">
      <div>
        <span>Inquiry Cart: <strong id="cartCount">0</strong></span>
        <ul id="cartSummary" class="cart-summary"></ul>
      </div>
      <button onclick="sendInquiryToGoogleForm()">Send Inquiry</button>
    </div>
  </section>
  <!-- footer omitted for brevity -->
  <script>
    const coursesData = [
      { name: "Accounting Skills with E-Invoicing", description: "Electronic invoicing for accounts assistants.", trainingType: "Classroom", duration: "1 Day", trainer: "LHDN", category: "Finance" },
      { name: "Payroll & PCB Calculation", description: "How to calculate PCB and manage payroll.", trainingType: "Workshop", duration: "1 Day", trainer: "Payroll Experts", category: "HR" },
      { name: "Sexual Harassment Awareness", description: "Creating a safe workplace through awareness.", trainingType: "Workshop", duration: "2 Days", trainer: "HR Trainers", category: "HR" },
      { name: "5S Workplace Organisation", description: "Implement 5S to improve workplace efficiency.", trainingType: "Workshop", duration: "1 Day", trainer: "Kaizen Trainers", category: "Safety" },
      { name: "Digital Marketing Fundamentals", description: "Essentials of digital marketing strategies.", trainingType: "Online", duration: "3 Days", trainer: "Marketing Agency", category: "Marketing" },
      { name: "Leadership & Team Building", description: "Build stronger leadership and team dynamics.", trainingType: "Retreat", duration: "2 Days", trainer: "Leadership Coaches", category: "Leadership" },
      { name: "Data Analytics for SMEs", description: "Learn to use data to drive business decisions.", trainingType: "Hybrid", duration: "3 Days", trainer: "Data Scientists", category: "IT" }
    ];

    function renderCourses() {
      const container = document.getElementById("coursesContainer");
      const searchText = document.getElementById("searchInput")?.value.toLowerCase() || "";
      const selectedCategory = document.getElementById("categoryFilter")?.value || "";
      container.innerHTML = "";

      coursesData
        .filter(course => {
          const matchSearch = course.name.toLowerCase().includes(searchText) || course.description.toLowerCase().includes(searchText);
          const matchCategory = selectedCategory === "" || course.category === selectedCategory;
          return matchSearch && matchCategory;
        })
        .forEach(course => {
          const card = document.createElement("div");
          card.className = "course-card";
          card.innerHTML = `
            <h4>${course.name}</h4>
            <p class="details">${course.description}</p>
            <p class="details">
              <strong>Training Type:</strong> ${course.trainingType}<br />
              <strong>Duration:</strong> ${course.duration}<br />
              <strong>Trainer:</strong> ${course.trainer}
            </p>
            <button class="inquire-button" onclick="addToCart('${course.name}')">Add to Inquiry</button>
          `;
          container.appendChild(card);
        });
    }

    function addToCart(courseName) {
      if (!inquiryCart.includes(courseName)) {
        inquiryCart.push(courseName);
        updateCartCount();
      }
    }

    function updateCartCount() {
      document.getElementById("cartCount").textContent = inquiryCart.length;
      updateCartSummary();
    }

    function updateCartSummary() {
      const summaryEl = document.getElementById("cartSummary");
      summaryEl.innerHTML = "";
      inquiryCart.forEach((item, index) => {
        const li = document.createElement("li");
        li.innerHTML = `${item} <span onclick="removeFromCart(${index})" style="color:red; cursor:pointer; font-weight:bold; margin-left:10px;">&times;</span>`;
        summaryEl.appendChild(li);
      });
      localStorage.setItem('inquiryCart', JSON.stringify(inquiryCart));
    }

    function removeFromCart(index) {
      inquiryCart.splice(index, 1);
      updateCartCount();
    }

    function sendInquiryToGoogleForm() {
      if (inquiryCart.length === 0) {
        alert("Your inquiry cart is empty. Please add courses first.");
        return;
      }
      const baseURL = "https://docs.google.com/forms/d/e/1FAIpQLSc_UkVoIW1bUqMsGFV0zbFlauUYZgfdMewSf-6JL69SB5np7w/viewform?usp=pp_url";
      const fieldID = "entry.896601463";
      const selectedCourses = inquiryCart.join(", ");
      const finalURL = `${baseURL}&${fieldID}=${encodeURIComponent(selectedCourses)}`;
      window.open(finalURL, "_blank");
      alert("Inquiry form opened in a new tab. Please complete and submit your request. Thank you!");
    }

    let inquiryCart = JSON.parse(localStorage.getItem('inquiryCart')) || [];

    document.addEventListener("DOMContentLoaded", () => {
      renderCourses();
      updateCartCount();
      document.getElementById("searchInput")?.addEventListener("input", renderCourses);
      document.getElementById("categoryFilter")?.addEventListener("change", renderCourses);
    });
  </script>
</body>
</html>
